# 1. 프로그램을 더 안전하게 만들기
## 1.1 프로그래밍의 함정 
    - 변경할수있는 참조나 언어가 허용하더라도 무조건 분기의 사용을 피하고 루프를 쓰지 않는것이 좋다 
    - 상태변이나 루프같은 위험한 기능을 사용하지 말자 
      - 가변참조나 루프가 필요한 경우 추상화 하자! 
      - 상태변이를 추상화하는 컴포넌트를 단 한번만 작성하자! 
### 1.1.1 안전하게 부수효과 처리하기 
 - 부수효과: 값을 반환하는 메서드나 함수가 외부상태를 변경하는 경우 
 - 안전한 프로그램 이란? 인자를 받아서 값을 반환하는 여러 함수를 합성해 만들어진 것 
### 1.1.2 참조 투명성으로 프로그램을 더 안전하게 만들기
 - 참조 투명성이란? 외부 세계의 상태를 변경하지도 않고 외부 상태에 의존하지도 않는 코드 

#### 참조 투명성 코드 특징 
1. 자기 완결적 : 어떤 문맥에서나 그 코드를 사용할 수 있음. 단지 올바른 인자를 그 코드에 제공하기만 하면 됨. 
2. 결정적 : 참조 투명성있는 코드는 인자가 같으면 항상 결과도 같기때문에, 개발자가 놀라는일이 없음. 같은 인자에 대해 항상 같은 결과를 보장함. 
3. 절대 예외를 던지지 않는다 : 참조 투명성 코드도 OOME/SOE(Stack Overflow Error)는 발생한다. 하지만 이런 오류는 버그가 있다는뜻. 
4. 예기치 않게 다른 코드가 실패하는 상황을 만들지 않음 : 인자를 변경하거나 다른 외부 데이터를 변경하지 않으며, 그에 따라 코드를 호출하는 쪽의 데이터가 오염되거나 동시접근으로 인해 오류가 발생하는 경우가 없다. 
5. 자신이 제대로 작동하기 위해 외부 장치에 의존하지 않는다. : 외부장치(DB/파일시스템/네트워크 등)를 사용할 수 없거나, 외부 장치가 너무 느리거나 고장 나서 코드가 계속 대기 상태에 머무는 경우가 없다. 

## 1.2 안전한 프로그래밍의 이점 
    - 프로그램이 결정적이기 때문에 프로그램을 추론하기 더 쉽다. : 입력 == 출력 테스트를 해도 동일한 결과 보장 
    - 프로그램을 더 쉽게 테스트할수있다. : 부수효과가 없어서 테스트 하면서 외부와 격리하기 위해 쓰는 Mock을 사용할 필요없음 
    - 프로그램을 더 모듈화 할수있다. : 부수효과가 없기에 예외를 던지지 않기에 예외를 잡을 필요가 없고, 상태 변이가 없기에 상태 추적 필요없고, 가변 상태를 공유하지 않기에 thread-safe 하고 동시변경이 없다 
    - 프로그램을 더 쉽게 합성하고 재조합 가능 : 프로그램을 작성하려면 먼저 필요한 여러 기반 함수를 만들고, 그들을 합성해 더 높은 수준의 함수를 만들며 원하는 프로그램에 해당하는 함수가 만들어질때까지 이과정을 반복한다. 
    - 공유 상태 변이를 피하므로 프로그램이 태생적으로 thread-safe하다: 이말은 모든 데이터가 불변이어야만 한다는 뜻은 아니다. 다만 공유 데이터는 모두 불변 이어야한다. 
